<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 1130" width="800" height="1130">
  <!-- Background and styling -->
  <defs>
    <linearGradient id="headerGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#2d7b3e;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1976d2;stop-opacity:1" />
    </linearGradient>
    
    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
      <feDropShadow dx="0" dy="3" stdDeviation="3" flood-opacity="0.1"/>
    </filter>
    
    <style type="text/css">
      text {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      }
      .title {
        font-size: 24px;
        font-weight: bold;
        fill: white;
      }
      .subtitle {
        font-size: 14px;
        fill: rgba(255, 255, 255, 0.9);
      }
      .step-number {
        font-size: 18px;
        font-weight: bold;
        fill: white;
      }
      .step-title {
        font-size: 18px;
        font-weight: bold;
        fill: #1e3d59;
      }
      .box-title {
        font-size: 14px;
        font-weight: bold;
        fill: #333;
      }
      .box-content {
        font-size: 12px;
        fill: #555;
      }
      .agent-title {
        font-size: 12px;
        font-weight: bold;
        fill: #0277bd;
      }
      .agent-desc {
        font-size: 10px;
        fill: #444;
      }
      .footer {
        font-size: 11px;
        font-style: italic;
        fill: #78909c;
      }
    </style>
  </defs>

  <!-- Main background -->
  <rect x="0" y="0" width="800" height="1130" rx="0" ry="0" fill="#f5f7fa" />
  
  <!-- Container -->
  <rect x="50" y="20" width="700" height="1080" rx="12" ry="12" fill="white" filter="url(#shadow)" />
  
  <!-- Header -->
  <rect x="50" y="20" width="700" height="80" rx="12" ry="12" fill="url(#headerGradient)" />
  <text x="400" y="55" text-anchor="middle" class="title">🧪 QSAR Toolbox Assistant: Step-by-Step Workflow</text>
  <text x="400" y="80" text-anchor="middle" class="subtitle">Multi-Agent Chemical Analysis Process Flow</text>

  <!-- Timeline/Connector -->
  <rect x="100" y="130" width="4" height="870" fill="#bbdefb" />
  
  <!-- Step 1: User Input -->
  <circle cx="102" cy="150" r="20" fill="url(#headerGradient)" />
  <text x="102" y="155" text-anchor="middle" class="step-number">1</text>
  <text x="140" y="155" class="step-title">User Query Processing</text>
  
  <!-- User Input Box -->
  <rect x="140" y="170" width="580" height="100" rx="8" ry="8" fill="#fff3e0" stroke="#ff9800" stroke-width="2" filter="url(#shadow)" />
  <text x="160" y="195" class="box-title">👤 User Input</text>
  <text x="160" y="220" class="box-content">User provides chemical information and analysis context</text>
  <text x="170" y="240" class="box-content">• Chemical Name (e.g., "benzene")</text>
  <text x="170" y="260" class="box-content">• SMILES Notation (e.g., "c1ccccc1")</text>
  
  <!-- Step arrow -->
  <text x="102" y="290" text-anchor="middle" style="font-size:24px; fill:#1e88e5;">↓</text>

  <!-- Step 2: API Data Retrieval -->
  <circle cx="102" cy="320" r="20" fill="url(#headerGradient)" />
  <text x="102" y="325" text-anchor="middle" class="step-number">2</text>
  <text x="140" y="325" class="step-title">Data Collection from QSAR Toolbox</text>
  
  <!-- QSAR API Box -->
  <rect x="140" y="340" width="280" height="110" rx="8" ry="8" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" filter="url(#shadow)" />
  <text x="160" y="365" class="box-title">🔌 QSAR Toolbox API</text>
  <text x="160" y="385" class="box-content">Connects to the OECD QSAR Toolbox</text>
  <text x="170" y="405" class="box-content">• Chemical search by name or SMILES</text>
  <text x="170" y="425" class="box-content">• Application of all relevant calculators</text>
  <text x="170" y="445" class="box-content">• Retrieval of data and profiling</text>
  
  <!-- Raw Data Box -->
  <rect x="440" y="340" width="280" height="110" rx="8" ry="8" fill="#e0f7fa" stroke="#00bcd4" stroke-width="2" filter="url(#shadow)" />
  <text x="460" y="365" class="box-title">📊 Raw Chemical Data</text>
  <text x="460" y="385" class="box-content">Structured chemical data retrieved from API</text>
  <text x="470" y="405" class="box-content">• Physicochemical Properties</text>
  <text x="470" y="425" class="box-content">• Experimental Results &amp; Endpoints</text>
  <text x="470" y="445" class="box-content">• Profiling Results &amp; Alerts</text>
  
  <!-- Step arrow -->
  <text x="102" y="470" text-anchor="middle" style="font-size:24px; fill:#1e88e5;">↓</text>

  <!-- Step 3: Multi-Agent Analysis -->
  <circle cx="102" cy="500" r="20" fill="url(#headerGradient)" />
  <text x="102" y="505" text-anchor="middle" class="step-number">3</text>
  <text x="140" y="505" class="step-title">Multi-Agent Analysis</text>
  
  <!-- Agent Framework Box -->
  <rect x="140" y="520" width="580" height="220" rx="8" ry="8" fill="#e3f2fd" stroke="#2196f3" stroke-width="2" filter="url(#shadow)" />
  <text x="160" y="545" class="box-title">🧠 Specialist Agent Analysis</text>
  <text x="160" y="565" class="box-content">Parallel processing by specialized AI agents analyzing different aspects</text>
  
  <!-- Agent Grid - Row 1 -->
  <rect x="160" y="580" width="170" height="60" rx="6" ry="6" fill="#e1f5fe" stroke="#03a9f4" stroke-width="2" />
  <text x="175" y="600" class="agent-title">🆔 Chemical Context</text>
  <text x="175" y="620" class="agent-desc">Confirms chemical identity</text>
  
  <rect x="345" y="580" width="170" height="60" rx="6" ry="6" fill="#e1f5fe" stroke="#03a9f4" stroke-width="2" />
  <text x="360" y="600" class="agent-title">⚗️ Physical Properties</text>
  <text x="360" y="620" class="agent-desc">Analyzes characteristics</text>
  
  <rect x="530" y="580" width="170" height="60" rx="6" ry="6" fill="#e1f5fe" stroke="#03a9f4" stroke-width="2" />
  <text x="545" y="600" class="agent-title">🌍 Environmental Fate</text>
  <text x="545" y="620" class="agent-desc">Evaluates behavior</text>
  
  <!-- Agent Grid - Row 2 -->
  <rect x="160" y="650" width="170" height="60" rx="6" ry="6" fill="#e1f5fe" stroke="#03a9f4" stroke-width="2" />
  <text x="175" y="670" class="agent-title">⚡ Profiling/Reactivity</text>
  <text x="175" y="690" class="agent-desc">Assesses reactivity &amp; alerts</text>
  
  <rect x="345" y="650" width="170" height="60" rx="6" ry="6" fill="#e1f5fe" stroke="#03a9f4" stroke-width="2" />
  <text x="360" y="670" class="agent-title">🧪 Experimental Data</text>
  <text x="360" y="690" class="agent-desc">Interprets test results</text>
  
  <rect x="530" y="650" width="170" height="60" rx="6" ry="6" fill="#e1f5fe" stroke="#03a9f4" stroke-width="2" />
  <text x="545" y="670" class="agent-title">🧬 Read-Across</text>
  <text x="545" y="690" class="agent-desc">Identifies analogues</text>
  
  <!-- Note box -->
  <rect x="160" y="720" width="540" height="30" rx="4" ry="4" fill="#fffde7" stroke="#ffd600" stroke-width="1" />
  <text x="170" y="740" style="font-size:11px; fill:#5d4037;">Each agent processes a specific data slice, generating a focused report</text>
  
  <!-- Step arrow -->
  <text x="102" y="760" text-anchor="middle" style="font-size:24px; fill:#1e88e5;">↓</text>

  <!-- Step 4: Synthesis -->
  <circle cx="102" cy="790" r="20" fill="url(#headerGradient)" />
  <text x="102" y="795" text-anchor="middle" class="step-number">4</text>
  <text x="140" y="795" class="step-title">Report Synthesis</text>
  
  <!-- Synthesis Box -->
  <rect x="140" y="810" width="580" height="100" rx="8" ry="8" fill="#f3e5f5" stroke="#9c27b0" stroke-width="2" filter="url(#shadow)" />
  <text x="160" y="835" class="box-title">🔄 Synthesis Agent</text>
  <text x="160" y="855" class="box-content">Integrates all specialist analyses into a cohesive report</text>
  <text x="170" y="875" class="box-content">• Combines insights from all specialist agents</text>
  <text x="170" y="895" class="box-content">• Contextualizes findings based on user's analysis context</text>
  
  <!-- Step arrow -->
  <text x="102" y="930" text-anchor="middle" style="font-size:24px; fill:#1e88e5;">↓</text>

  <!-- Step 5: Output -->
  <circle cx="102" cy="960" r="20" fill="url(#headerGradient)" />
  <text x="102" y="965" text-anchor="middle" class="step-number">5</text>
  <text x="140" y="965" class="step-title">User Output &amp; Results</text>
  
  <!-- Output Box -->
  <rect x="140" y="980" width="580" height="100" rx="8" ry="8" fill="#fce4ec" stroke="#e91e63" stroke-width="2" filter="url(#shadow)" />
  <text x="160" y="1005" class="box-title">📄 Final Report &amp; Downloads</text>
  <text x="160" y="1025" class="box-content">Comprehensive chemical analysis deliverables</text>
  <text x="170" y="1045" class="box-content">• Synthesized Report addressing user's context</text>
  <text x="170" y="1065" class="box-content">• Hazard Assessments &amp; Read-Across Recommendations</text>
  
  <!-- Footer -->
  <text x="400" y="1120" text-anchor="middle" class="footer">QSAR Toolbox Assistant combines the OECD QSAR Toolbox API with specialized AI agents</text>
</svg>